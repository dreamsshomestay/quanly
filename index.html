<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Dreamss Homestay ‚Äì Qu·∫£n l√Ω ph√≤ng V2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="page">
    <header class="page-header">
      <h1>Dreamss Homestay ‚Äì Qu·∫£n l√Ω ph√≤ng</h1>
      <p class="subtitle">
        Nh·∫≠p booking ‚Üí t√≠nh gi√° ‚Üí ki·ªÉm tra tr√πng ph√≤ng ‚Üí t·∫°o phi·∫øu x√°c nh·∫≠n ‚Üí
        l∆∞u Google Sheet + c·∫≠p nh·∫≠t kh√°ch h√†ng th√¢n thi·∫øt.
      </p>
    </header>

    <main class="layout">
      <!-- 1. TH√äM BOOKING -->
      <section class="card">
        <h2>1. Th√™m booking</h2>
        <p class="small-text">
          Ch·ªçn ph√≤ng, combo v√† gi·ªù. H·ªá th·ªëng t·ª± t√≠nh <b>gi√° combo + gi·ªù th√™m</b>,
          ƒë·ªìng th·ªùi ch·∫∑n tr√πng ph√≤ng (c·ªông <b>30 ph√∫t d·ªçn</b> sau check-out).
        </p>

        <form id="bookingForm">
          <div class="row">
            <div class="col-2">
              <label for="roomSelect">Ph√≤ng</label>
              <select id="roomSelect"></select>
            </div>
            <div class="col-2">
              <label for="comboSelect">Combo</label>
              <select id="comboSelect"></select>
            </div>
          </div>

          <div class="row">
            <div class="col-2">
              <label for="checkIn">Gi·ªù check-in</label>
              <input type="datetime-local" id="checkIn" />
            </div>
            <div class="col-2">
              <label for="checkOut">Gi·ªù check-out</label>
              <input type="datetime-local" id="checkOut" />
            </div>
          </div>

          <div class="price-preview" id="pricePreview">
            Ch·ªçn ph√≤ng, combo v√† gi·ªù ƒë·ªÉ xem gi√° d·ª± ki·∫øn.
          </div>

          <p class="small-text">
            L∆∞u √Ω: m·ªói booking s·∫Ω c√≥ th√™m <b>30 ph√∫t d·ªçn ph√≤ng</b>. Ph√≤ng ch·ªâ
            ƒë∆∞·ª£c book l·∫°i sau khi d·ªçn xong.
          </p>

          <button type="submit" class="btn primary">
            L∆∞u booking & m·ªü Phi·∫øu x√°c nh·∫≠n
          </button>
        </form>
      </section>

      <!-- 2. XEM L·ªäCH C√íN/H·∫æT -->
      <section class="card">
        <h2>2. Xem l·ªãch C√íN / H·∫æT theo ng√†y (1 ph√≤ng)</h2>
        <form id="viewForm">
          <div class="row">
            <div class="col-2">
              <label for="viewRoom">Ph√≤ng</label>
              <select id="viewRoom"></select>
            </div>
            <div class="col-2">
              <label for="viewDate">Ng√†y</label>
              <input type="date" id="viewDate" />
            </div>
          </div>
          <button type="submit" class="btn secondary">Xem l·ªãch</button>
        </form>

        <div id="availabilityTable"></div>
      </section>

      <!-- 3. T√åM PH√íNG TR·ªêNG -->
      <section class="card">
        <h2>3. T√¨m ph√≤ng tr·ªëng theo khung gi·ªù (k√®m link Drive)</h2>
        <form id="searchForm">
          <div class="row">
            <div class="col-2">
              <label for="searchCheckIn">Gi·ªù check-in</label>
              <input type="datetime-local" id="searchCheckIn" />
            </div>
            <div class="col-2">
              <label for="searchCheckOut">Gi·ªù check-out</label>
              <input type="datetime-local" id="searchCheckOut" />
            </div>
          </div>
          <div class="row">
            <div class="col-2">
              <label for="searchCombo">Combo (ƒë·ªÉ t√≠nh gi√° g·ª£i √Ω)</label>
              <select id="searchCombo"></select>
            </div>
          </div>
          <button type="submit" class="btn secondary">
            T√¨m ph√≤ng tr·ªëng
          </button>
        </form>

        <div id="searchResults"></div>
      </section>

      <!-- 4. DANH S√ÅCH BOOKING (trong phi√™n) -->
      <section class="card">
        <h2>4. Booking ƒë√£ l∆∞u (trong phi√™n hi·ªán t·∫°i)</h2>
        <p class="small-text">
          D√πng ƒë·ªÉ ki·ªÉm tra nhanh nh√¢n vi√™n nh·∫≠p ƒë√∫ng ch∆∞a. D·ªØ li·ªáu ch√≠nh th·ª©c v·∫´n
          l∆∞u ·ªü Google Sheet khi b·∫°n <b>T·∫°o n·ªôi dung x√°c nh·∫≠n</b>.
        </p>
        <div id="bookingList" class="small-text"></div>
      </section>

      <!-- 5. PHI·∫æU X√ÅC NH·∫¨N -->
      <section class="card full-width" id="confirmCard" style="display:none;">
        <h2>5. Phi·∫øu x√°c nh·∫≠n ƒë·∫∑t Dreamss Home</h2>
        <p class="small-text">
          ƒêi·ªÅn th√¥ng tin kh√°ch, ph·ª• ph√≠, gi·∫£m gi√°. H·ªá th·ªëng t√≠nh t·ªïng, c·∫≠p nh·∫≠t
          h·∫°ng kh√°ch th√¢n thi·∫øt & g·ª≠i d·ªØ li·ªáu l√™n Google Sheet.
        </p>

        <form id="confirmForm">
          <div class="row">
            <div class="col-2">
              <label>Ph√≤ng + Chi nh√°nh</label>
              <input type="text" id="cfRoomInfo" readonly />
            </div>
            <div class="col-2">
              <label>Combo</label>
              <input type="text" id="cfComboInfo" readonly />
            </div>
          </div>

          <div class="row">
            <div class="col-2">
              <label>Check-in</label>
              <input type="text" id="cfCheckIn" readonly />
            </div>
            <div class="col-2">
              <label>Check-out</label>
              <input type="text" id="cfCheckOut" readonly />
            </div>
          </div>

          <div class="row">
            <div class="col-2">
              <label>Gi√° home g·ªëc (combo + gi·ªù th√™m)</label>
              <input type="text" id="cfBasePrice" readonly />
            </div>
            <div class="col-2">
              <label>Th·ªùi l∆∞·ª£ng (gi·ªù)</label>
              <input type="text" id="cfDuration" readonly />
            </div>
          </div>

          <hr />

          <div class="row">
            <div class="col-2">
              <label>Kh√°ch h√†ng (Anh/Ch·ªã)</label>
              <input type="text" id="cfCustomerName" placeholder="T√™n kh√°ch" />
            </div>
            <div class="col-2">
              <label>S·ªë ƒëi·ªán tho·∫°i</label>
              <input type="tel" id="cfCustomerPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i" />
            </div>
          </div>

          <div class="row">
            <div class="col-2">
              <label>S·ªë l∆∞·ª£ng kh√°ch (t·ªëi ƒëa 2, th√™m kh√°ch +100K)</label>
              <input type="number" id="cfGuestCount" min="1" value="2" />
            </div>
            <div class="col-2">
              <label>Gi·∫£m gi√° % (n·∫øu c√≥)</label>
              <input type="number" id="cfDiscountPercent" min="0" max="100" />
            </div>
          </div>

          <div class="row">
            <div class="col-2">
              <label>Gi·∫£m gi√° c·ªë ƒë·ªãnh (VNƒê)</label>
              <input type="number" id="cfDiscountAmount" min="0" />
            </div>
            <div class="col-2">
              <label>Ph√≠ trang tr√≠ (VNƒê)</label>
              <input type="number" id="cfDecorFee" min="0" />
            </div>
          </div>

          <div class="row">
            <div class="col-2">
              <label>Ph√≠ kh√°c (VNƒê)</label>
              <input type="number" id="cfOtherFee" min="0" />
            </div>
            <div class="col-2">
              <label>ƒê√£ thanh to√°n (VNƒê)</label>
              <input type="number" id="cfPaidAmount" min="0" />
            </div>
          </div>

          <div class="row">
            <div class="col-2">
              <label>Tr·∫°ng th√°i thanh to√°n</label>
              <select id="cfPaidStatus">
                <option value="chua">Ch∆∞a thanh to√°n ƒë·ªß</option>
                <option value="du">ƒê√£ thanh to√°n ƒë·ªß</option>
              </select>
            </div>
            <div class="col-2">
              <label>Ghi ch√∫ kh√°c</label>
              <input type="text" id="cfNote" placeholder="VD: Trang tr√≠ sinh nh·∫≠t..." />
            </div>
          </div>

          <div id="cfPriceSummary" class="price-preview">
            T·ªïng ti·ªÅn sau gi·∫£m s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y.
          </div>

          <button type="submit" class="btn primary">
            T·∫°o n·ªôi dung x√°c nh·∫≠n & l∆∞u Google Sheet
          </button>
        </form>

        <h3>N·ªôi dung g·ª≠i kh√°ch</h3>
        <textarea id="cfTextOutput" rows="10" class="confirm-text"></textarea>

        <button type="button" id="btnCopyConfirm" class="btn secondary">
          üìã Copy n·ªôi dung g·ª≠i kh√°ch
        </button>

        <div id="tierInfo" class="loyalty-info"></div>
      </section>

      <!-- 6. L·ªäCH D·ªåN PH√íNG -->
      <section class="card full-width">
        <h2>6. L·ªãch d·ªçn ph√≤ng (Housekeeping)</h2>
        <form id="cleaningForm">
          <div class="row">
            <div class="col-2">
              <label for="cleaningDate">Ng√†y</label>
              <input type="date" id="cleaningDate" />
            </div>
          </div>
          <button type="submit" class="btn secondary">Xem l·ªãch d·ªçn</button>
        </form>

        <p class="small-text">
          Hi·ªÉn th·ªã gi·ªù check-out v√† block d·ªçn 30 ph√∫t cho t·ª´ng ph√≤ng trong ng√†y.
        </p>

        <div id="cleaningTable"></div>
      </section>
    </main>

    <footer class="footer">
      ¬© 2025 Dreamss Homestay ‚Äì Internal tool (beta V2)
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
